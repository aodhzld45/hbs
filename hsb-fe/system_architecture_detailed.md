
# 🧭 전체 아키텍처 구조 상세 설명

---

## 📌 1. 외부망 (Internet Zone)
**위치:** 구성도 최상단

### 💡 구성 요소:
- **IDC Internet #1, #2 (30Mbps)**: 두 개의 독립된 외부 인터넷 회선으로 이중화 구성
- **L3 Switch**: 각각의 인터넷 회선은 L3 스위치를 통해 내부로 진입
- **IPS (침입 탐지 시스템)**: 트래픽 이상 여부 분석 및 차단
- **FW (방화벽)**: 외부에서 내부로 들어오는 트래픽 제어

- **본사 Internet (100Mbps)**: 내부 본사 사무실 전용 고속 인터넷 회선
- **Metro Switch + VPN → L2 Switch**: VPN을 통해 IDC와 연결

- **지부 Internet**: 각 지점에서 자체 인터넷 회선 이용
- **Metro Switch + VPN + L2 Switch**: 지부 NAC 인증 후 내부 접속

### 💡 역할:
- 일반 사용자 또는 외부 시스템에서 들어오는 요청의 시작점
- 본사 및 지부가 IDC와 **VPN 터널**을 통해 안전하게 연결되도록 구성
- 내부망에 직접 접근 불가 → DMZ, 방화벽, IPS 등을 통해 필터링

---

## 📌 2. DMZ Zone (DeMilitarized Zone)
**위치:** 구성도 오른쪽 하단

### 💡 구성 요소:
- **DMZ WEB FW#1**: 외부망과 내부망 사이의 전용 방화벽
- **DMZ L4#1, L4#2**: TCP/HTTP 기반의 로드밸런서 (세션 유지, 부하 분산)
- **DMZ L2#1, L2#2**: 웹 서버 또는 API 서버 연결을 위한 Layer2 스위치
- **Trunk 라인**: 여러 VLAN 트래픽을 전달하는 고속 백본 연결

### 💡 역할:
- 외부 사용자 요청(HTTP/HTTPS)을 최초로 수신하는 영역
- 웹 서버 또는 API Gateway 서버를 통해 **제한적 서비스만 제공**
- 내부 DB 또는 중요 시스템에는 직접 접근하지 못하고, 방화벽으로 차단
- L4 스위치가 서버 트래픽을 분산하며, **서버 이중화와 고가용성 확보**

---

## 📌 3. Trust Zone (내부망의 핵심 보안망)
**위치:** 구성도 좌측 하단

### 💡 구성 요소:
- **Trust L4#1, L4#2**: 내부 트래픽 분산 처리 로드밸런서
- **Trust L2#1, L2#2**: 내부 업무 서버, DB, NAC 등 장비 연결
- **DB Server Farm**: 상조 계약, 회원정보, 상담 이력 등 주요 데이터 저장소
- **NAC Controller**: 네트워크 접근 제어 시스템. 사용자/장비 인증 및 행위 제어
- **외부 연동용 트랜잭션 스위치**: 금융결제원, KIB Net, 신한카드 등과 연계
- **외부 연동 전용 FW**: 금융망 접근에 대한 별도 보안 필터링

### 💡 역할:
- **보안 등급이 가장 높은 영역**으로, 외부 접근은 철저히 제한
- DMZ를 통해 들어온 트래픽도 내부 방화벽을 통과해야 접근 가능
- 업무 시스템, 결제 트랜잭션, 고객정보 등이 이 영역에 위치
- NAC를 통해 비인가 접속 또는 비정상 행위를 제어

---

## 📌 4. 본사 및 지부 네트워크
**위치:** 구성도 중앙/우측 상단

### 💡 구성 요소:
- **Metro Switch → VPN → L2 Switch**: 전용 회선 또는 VPN 터널로 IDC 접속
- **NAC Sensor (본사/지부)**: 사내 직원 단말 인증 및 행위 감시

### 💡 역할:
- 본사/지부 직원이 내부 시스템에 접근 시 **VPN 및 NAC 인증**을 거쳐 접근
- IDC 내부망과 연결은 VPN 터널을 통해 암호화된 통신만 허용
- NAC 센서를 통해 장비의 보안 상태, 사용자 인증, 비인가 접근 제어

---

## 🧱 레이어별 장비 및 역할 요약

| Layer | 장비 명칭            | 구성도 예시             | 역할 요약                                               |
|--------|---------------------|--------------------------|----------------------------------------------------------|
| L2     | L2 Switch           | Trust L2#1, DMZ L2#1     | MAC 주소 기반 장비 연결, VLAN 구성 및 내부 서버 연결     |
| L3     | L3 Switch / Router  | L3 Switch#2              | IP 라우팅, 외부망과 내부망 간 네트워크 경로 제어         |
| L4     | Load Balancer       | DMZ L4#1, Trust L4#1     | 포트 기반 트래픽 분산, 세션 유지, 서버 이중화           |

---

## 🔄 예시 흐름: 외부 사용자의 웹 요청 → 내부 DB 요청

```
[외부 사용자 접속]
  ↓
IDC Internet → L3 Switch → IPS → FW
  ↓
DMZ WEB FW → DMZ L4 → DMZ L2 → Web Server
  ↓
내부 요청 발생 시 (예: 로그인)
  ↓
내부 FW → Trust L4 → Trust L2 → DB Server (계약 정보 조회)
```

---

## 🛡️ 보안 설계 포인트 요약

| 구역         | 보안 기능            | 설명                                                        |
|--------------|----------------------|-------------------------------------------------------------|
| 외부 → DMZ   | DMZ 방화벽           | 외부 요청은 DMZ까지만 허용, 내부망 직접 접근 차단          |
| DMZ → 내부망 | 내부 방화벽 + ACL    | 허용된 포트/IP만 내부 시스템 접근 허용                      |
| 본사/지부 VPN | VPN 터널 + NAC       | 안전한 암호화 통신 + 장비/사용자 인증                       |
| 내부망 (Trust) | NAC Controller       | 정책 기반 장비 제어, 비인가 사용자 차단, 로그 감사 가능     |

---

## ✅ 정리 요약

| 구역           | 주요 장비 및 구성 요소                                 | 역할 요약                          |
|----------------|----------------------------------------------------------|------------------------------------|
| 외부망         | IDC Internet, L3, IPS, FW                                | 외부 요청 진입, 1차 필터링          |
| DMZ            | DMZ FW, L4, L2, Web Server, Trunk                        | 외부 요청 수용, 내부망과 분리된 중간 완충지대 |
| 내부망 (Trust) | Trust L4/L2, DB Farm, NAC, 금융망 연결                  | 민감 데이터 처리, 보안 제어 핵심 구역 |
| 본사/지부      | Metro Switch, VPN, NAC Sensor                           | 내부 직원이 안전하게 내부망 접근 |
